---
title: New-CsNetworkMediaBypassConfiguration
TOCTitle: New-CsNetworkMediaBypassConfiguration
ms:assetid: 24055ae5-7fc8-4ca5-9e65-ac3a1f17b405
ms:mtpsurl: https://technet.microsoft.com/ru-ru/library/Gg425718(v=OCS.15)
ms:contentKeyID: 49309205
ms.date: 05/19/2016
mtps_version: v=OCS.15
ms.translationtype: HT
---

# New-CsNetworkMediaBypassConfiguration

 

_**Дата изменения раздела:** 2015-03-09_

Создает новые глобальные настройки обхода мультимедиа. Данный командлет впервые появился в Lync Server 2010.

## Синтаксис

    New-CsNetworkMediaBypassConfiguration [-AlwaysBypass <$true | $false>] [-BypassID <String>] [-Enabled <$true | $false>] [-EnableDefaultBypassID <$true | $false>] [-EnabledForAudioVideoConferences <$true | $false>] [-ExternalBypassMode <Off | ICE | Any>] [-InternalBypassMode <Off | ICE | Any>]

## Примеры

## ПРИМЕР 1

Команды в данном примере разрешают обход сервера-посредника и настраивают выполнение попыток обхода в любом случае. В первой строке примера происходит вызов командлета **New-CsNetworkMediaBypassConfiguration**. Командлету передаются два параметра, AlwaysBypass и Enabled, оба со значением True ($true). Установка параметра Enabled в значение True разрешает обход сервера-посредника, установка параметра AlwaysBypass в значение True обеспечивает выполнение попыток обхода сервера-посредника для всех звонков. (Обратите внимание, что при установке этих двух параметров автоматически формируется значение для свойства BypassID.) Командлет **New-CsNetworkMediaBypassConfiguration** создает объект только в памяти, поэтому этот объект назначается переменной $a.

Конфигурация обхода мультимедиа хранится в параметрах конфигурации сети. Поэтому во второй строке примера изменения в параметрах конфигурации обхода сохраняются в конфигурации сети посредством вызова командлета **Set-CsNetworkConfiguration**, в который передается созданный в первой строке объект конфигурации обхода ($a) в качестве параметра MediaBypassSettings.

    $a = New-CsNetworkMediaBypassConfiguration -AlwaysBypass $true -Enabled $true
    Set-CsNetworkConfiguration -MediaBypassSettings $a

## ПРИМЕР 2

Командлета **Set-CsNetworkMediaBypassConfiguration** нет в Lync Server, поэтому для изменения существующих настроек нужно либо создать новую конфигурацию (как показано в примере 1), чтобы заменить существующую конфигурацию, либо модифицировать настройки, сначала получив и изменив их с помощью командлета **Set-CsNetworkConfiguration**. Данный пример демонстрирует отключение параметра Always Bypass вторым способом.

В первой строке примера извлекаются существующие параметры обхода сервера-посредника. Это осуществляется вызовом командлета **Get-CsNetworkConfiguration**. Вызов данного командлета заключен в скобки, чтобы он выполнялся до запуска других частей команды. Командлет **Get-CsNetworkConfiguration** извлекает параметры для всей конфигурации сети. Чтобы получить только параметры обхода сервера-посредника, указывается свойство MediaBypassSettings. Эти параметры назначаются переменной $a.

Во второй строке выполняется изменение параметров, сохраненных в переменной $a, путем присваивания значения False ($false) свойству AlwaysBypass. В третьей строке вызывается командлет **Set-CsNetworkConfiguration**, при этом в параметр MediaBypassSettings передается переменная $a, и таким образом сохраняются изменения, сделанные в свойстве AlwaysBypass.

    $a = (Get-CsNetworkConfiguration).MediaBypassSettings
    $a.AlwaysBypass = $false
    Set-CsNetworkConfiguration -MediaBypassSettings $a

## Подробное описание

Данный командлет создает глобальные настройки обхода мультимедиа для подключений, использующих средства аудиосвязи.

В отличие от большинства командлетов New- в Lync Server, данный командлет не сразу сохраняет новую конфигурацию: он создает настройки только в памяти. Объект, созданный данным командлетом, должен быть сохранен в переменную и затем передан в качестве параметра MediaBypassSettings конфигурации сети. (Дополнительные сведения смотри в подразделе с примерами.)

Настройки, созданные данным командлетом, могут быть получены только при обращении к свойству MediaBypassSettings глобальной конфигурации сети. Чтобы получить данные настройки, запустите команду: (Get-CsNetworkConfiguration).MediaBypassSettings.

По умолчанию локально запускать командлет **New-CsNetworkMediaBypassConfiguration** имеют право члены группы RTCUniversalServerAdmins. Чтобы получить список всех ролей управления доступом на основе ролей (RBAC), которые были назначены для этого командлета (включая все созданные вами роли RBAC), запустите следующую команду из командной строки Windows PowerShell:

Get-CsAdminRole | Where-Object {$\_.Cmdlets –match "New-CsNetworkMediaBypassConfiguration"}

## Параметры


<table>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="header">
<th>Параметр</th>
<th>Обязательный?</th>
<th>Тип</th>
<th>Описание</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p><em>AlwaysBypass</em></p></td>
<td><p>Необязательный</p></td>
<td><p>Boolean</p></td>
<td><p>Установка данному параметру значения True приведет к выполнению попыток обхода для всех звонков.</p>
<p>Задавайте данному параметру значение True только в том случае, если отключен контроль допуска звонков (CAC). Задавайте данному параметру значение True только для развертываний, где:</p>
<p>- не требуется контроль за пропускной способностью канала;</p>
<p>- не требуется выполнять сложный контроль, когда должен происходить обход;</p>
<p>- между клиентами и шлюзами есть подключение.</p>
<p>Если параметру Enabled задано значение True, а параметру AlwaysBypass — значение False, логика выполнения обхода будет использовать сайты и регионы конфигурации сети для определения возможности выполнения обхода.</p>
<p>Если задать параметру AlwaysBypass значение True и при этом также не задать параметру Enabled значение True, то отображается сообщение: &quot;Параметр AlwaysBypass игнорируется, если значение параметра Enabled равно false&quot;.</p>
<p>Если установить параметрам AlwaysBypass и Enabled значение True, то идентификатор обхода будет сформирован автоматически и сохранен в свойстве BypassID.</p>
<p>Значение по умолчанию: False</p></td>
</tr>
<tr class="even">
<td><p><em>BypassID</em></p></td>
<td><p>Необязательный</p></td>
<td><p>String</p></td>
<td><p>Идентификатор обхода мультимедиа. Если для данного параметра задано значение, а параметр AlwaysBypass имеет значение True, то данный идентификатор BypassID будет назначен всем подсетям. Если параметр AlwaysBypass имеет значение False, то значение BypassID назначается всем подсетям, не указанным в сайтах и регионах конфигурации сети.</p>
<p>Данный идентификатор должен иметь формат GUID (например, 96f14dea-5170-429a-b92b-f1cb909c4bb6). Но обычно вам не потребуется задавать или изменять данный параметр. Его значение формируется автоматически при задании параметру Enabled значения True и либо: 1) задании параметру AlwaysBypass значения True, 2) или задании параметру EnableDefaultBypassID значения True.</p></td>
</tr>
<tr class="odd">
<td><p><em>Enabled</em></p></td>
<td><p>Необязательный</p></td>
<td><p>Boolean</p></td>
<td><p>Установите данному параметру значение True, чтобы разрешить обход мультимедиа. С этого момента решения о выполнении обхода будут приниматься на основе значения параметра AlwaysBypass следующим образом:</p>
<p>- если параметр AlwaysBypass имеет значение True, попытки обхода выполняются для всех звонков.</p>
<p>- если параметр AlwaysBypass имеет значение False, то для определения возможности выполнения обхода используются сайт и регион конфигурации сети.</p>
<p>Значение по умолчанию: False</p></td>
</tr>
<tr class="even">
<td><p><em>EnableDefaultBypassID</em></p></td>
<td><p>Необязательный</p></td>
<td><p>Boolean</p></td>
<td><p>Данное значение применяется, только если параметру AlwaysBypass задано значение False.</p>
<p>Установка данному параметру значения True приведет к автоматическому формированию идентификатора обхода по умолчанию. Это автоматически созданное значение будет сохранено в свойстве BypassID.</p>
<p>Этот параметр полезно использовать, когда имеется хорошо связанное ядро сети и удаленные сайты с ограниченными по пропускной способности каналами. Администратору потребуется указать только подсети, связанные с удаленными сайтами, с помощью сайтов и регионов конфигурации сети. Не требуется определять подсети, связанные с ядром сети, и попытки обхода между этими подсетями будут выполняться автоматически.</p>
<p>Значение по умолчанию: False</p></td>
</tr>
<tr class="odd">
<td><p><em>EnabledForAudioVideoConferences</em></p></td>
<td><p>Необязательный</p></td>
<td><p>Boolean</p></td>
<td><p>Указывает, должен ли использоваться обход мультимедиа для аудио или видеоконференций. Значение по умолчанию — False ($False).</p></td>
</tr>
<tr class="even">
<td><p><em>ExternalBypassMode</em></p></td>
<td><p>Необязательный</p></td>
<td><p>BypassModeEnumType</p></td>
<td><p>Зарезервировано для будущего использования. Внешний обход мультимедиа не поддерживается в Lync Server.</p>
<p>По умолчанию: Off</p></td>
</tr>
<tr class="odd">
<td><p><em>InternalBypassMode</em></p></td>
<td><p>Необязательный</p></td>
<td><p>BypassModeEnumType</p></td>
<td><p>Значение данного параметра управляет возможностью клиентов, подключаемых изнутри сети организации, выполнять обход мультимедиа. Если параметру Enabled задано значение True, то данное значение будет автоматически изменено на Any. Другие значения данного параметра зарезервированы для будущего использования.</p>
<p>По умолчанию: Off</p></td>
</tr>
</tbody>
</table>


## Типы входных данных

Нет.

## Типы возвращаемых данных

Создает ссылку на объект типа Microsoft.Rtc.Management.WritableConfig.Settings.NetworkConfiguration.MediaBypassSettingsType.

## См. также

#### Другие ресурсы

[Get-CsNetworkConfiguration](get-csnetworkconfiguration.md)  
[Set-CsNetworkConfiguration](set-csnetworkconfiguration.md)

