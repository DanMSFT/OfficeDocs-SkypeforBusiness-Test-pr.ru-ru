---
title: Test-CsAVConference
TOCTitle: Test-CsAVConference
ms:assetid: a1492563-9a97-44ac-b19a-8d5972cdd062
ms:mtpsurl: https://technet.microsoft.com/ru-ru/library/Gg412749(v=OCS.15)
ms:contentKeyID: 49310703
ms.date: 05/19/2016
mtps_version: v=OCS.15
ms.translationtype: HT
---

# Test-CsAVConference

 

_**Дата изменения раздела:** 2015-03-09_

Проверяет возможность включения двух пользователей в аудио- или видеоконференцию. Данный командлет впервые появился в Lync Server 2010.

## Синтаксис

    Test-CsAVConference -ReceiverCredential <PSCredential> -ReceiverSipAddress <String> -SenderCredential <PSCredential> -SenderSipAddress <String> [-Authentication <TrustedServer | Negotiate | ClientCertificate | LiveID>] [-RegistrarPort <Int32>] [-TargetFqdn <String>] <COMMON PARAMETERS>

    Test-CsAVConference -TargetFqdn <String> [-Authentication <TrustedServer | Negotiate | ClientCertificate | LiveID>] [-ReceiverSipAddress <String>] [-RegistrarPort <Int32>] [-SenderSipAddress <String>] <COMMON PARAMETERS>

    Test-CsAVConference [-Authentication <TrustedServer | Negotiate | ClientCertificate | LiveID>] <COMMON PARAMETERS>

    COMMON PARAMETERS: [-Force <SwitchParameter>] [-OutLoggerVariable <String>] [-OutVerboseVariable <String>] [-TestJoinLauncher <SwitchParameter>]

## Примеры

## ПРИМЕР 1

В примере 1 проверяется, может ли пара предварительно настроенных тестовых пользователей выполнить вход в пул atl-cs-001.litwareinc.com и затем принять участие в аудио- или видеоконференции. Данная команда будет работать только в том случае, если тестовые пользователи определены для пула atl-cs-001.litwareinc.com. Если они определены, команда будет проверять, могут ли эти два пользователя выполнить вход в систему. Если могут, первый тестовый пользователь будет создавать аудио- или видеоконференцию и приглашать второго пользователя принять в ней участие; командлет затем проверит, смогли ли два тестовых пользователя осуществить подключение.

Если тестовые пользователи не определены, команда завершится ошибкой, так как она не будет знать, какие пользователи должны участвовать в тесте. Если тестовые пользователи не определены для пула, необходимо включить параметры SenderSipAddress и ReceiverSipAddress, а также соответствующие учетные данные пользователей, участвующих в обмене мгновенными сообщениями. После этого командлет **Test-CsAVConference** проведет проверки с помощью этих двух заданных пользователей.

    Test-CsAVConference -TargetFqdn atl-cs-001.litwareinc.com 

## ПРИМЕР 2

Команда, показанная в примере 2, проверяет способность двух пользователей (litwareinc\\pilar и litwareinc\\kenmyer) выполнить вход в Lync Server и затем принять участие в аудио- или видеоконференции. Для этого первая команда в примере использует командлет **Get-Credential** для создания объекта учетных данных Windows PowerShell, содержащий имя и пароль пользователя Pilar Ackerman. (Так как имя входа, litwareinc\\pilar, включено в виде параметра, диалоговое окно запроса учетных данных Windows PowerShell запросит у администратора только пароль для учетной записи Pilar Ackerman.) Получившийся объект учетных данных затем будет сохранен в переменной с именем $cred1. Вторая команда делает то же самое, возвращая объект учетных данных для учетной записи Ken Myer.

С помощью двух объектов учетных данных третья команда в примере определяет, могут ли два пользователя выполнить вход в Lync Server и принять участие в аудио- или видеоконференции. Для этого вызывается командлет **Test-CsAVConference** со следующими параметрами: TargetFqdn (полное доменное имя пула регистратора), SenderSipAddress (адрес SIP для первого тестового пользователя), SenderCredential (объект Windows PowerShell, содержащий учетные данные для того же пользователя), ReceiverSipAddress (адрес SIP для другого тестового пользователя) и ReceiverCredential (объект Windows PowerShell, содержащий учетные данные для другого пользователя).

    $cred1 = Get-Credential "litwareinc\pilar"
    $cred2 = Get-Credential "litwareinc\kenmyer"
    
    Test-CsAVConference -TargetFqdn atl-cs-001.litwareinc.com -SenderSipAddress "sip:pilar@litwareinc.com" -SenderCredential $cred1 -ReceiverSipAddress "sip:kenmyer@litwareinc.com" -ReceiverCredential $cred2

## Подробное описание

Командлет **Test-CsAVConference** представляет собой пример "искусственной транзакции". Искусственные транзакции используются в Lync Server для проверки того, что пользователи смогут успешно выполнять обычные задачи, такие как вход в систему, обмен мгновенными сообщениями или звонок на телефон, находящийся в телефонной сети общего пользования (ТСОП). Эти тесты могут проводиться как вручную администратором, так и автоматически такими приложениями, как Microsoft System Center Operations Manager (ранее Microsoft Operations Manager).

Искусственные транзакции обычно проводятся двумя разными способами. Многие администраторы будут использовать командлеты **CsHealthMonitoringConfiguration**, чтобы настроить тестовых пользователей для всех своих пулов регистраторов. Эти тестовые пользователи представляют собой пару пользователей, предварительно настроенных для использования в искусственных транзакциях (обычно это тестовые учетные записи, не принадлежащие реальным пользователям). При настройке для пула тестовых пользователей администраторы могут выполнять в этом пуле искусственные транзакции, не указывая удостоверения (и не задавая учетные данные) для учетных записей пользователей, включенных в тест.

Кроме того, администраторы могут выполнять искусственные транзакции с помощью учетных записей реальных пользователей. Например, если два пользователя не могут обмениваться мгновенными сообщениями, то администратор может выполнить искусственную транзакцию с использованием учетных записей этих двух пользователей (вместо пары тестовых учетных записей), а затем попытаться найти и устранить проблему. Для проведения искусственной транзакции с использованием реальных учетных записей придется предоставить имена и пароли для входа каждого пользователя.

Командлет **Test-CsAVConference** проверяет, могут ли два тестовых пользователя провести аудио- или видеоконференцию. Когда командлет запускается, два пользователя входят в систему. После успешного входа первый пользователь создает аудио- или видеоконференцию и ожидает, когда второй пользователь присоединится к конференции. После короткого обмена данными конференция удаляется и два тестовых пользователя выходят из системы.

Командлет **Test-CsAVConference** в действительности не проводит аудио- или видеоконференцию между двумя тестовыми пользователями. Вместо этого он проверяет, могут ли два пользователя установить соединения, которые необходимы для проведения аудио- или видеоконференции.

Чтобы получить список всех ролей управления доступом на основе ролей (RBAC), которым назначен этот командлет (включая все самостоятельно созданные роли RBAC), выполните в командной строке Windows PowerShell следующую команду:

Get-CsAdminRole | Where-Object {$\_.Cmdlets –match "Test-CsAVConference"}

## Параметры


<table>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="header">
<th>Параметр</th>
<th>Обязательный</th>
<th>Тип</th>
<th>Описание</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p><em>ReceiverCredential</em></p></td>
<td><p>Обязательный</p></td>
<td><p>PSCredential</p></td>
<td><p>Объект учетных данных пользователя для первой из двух учетных записей пользователей, которые должны тестироваться. Значение, переданное в ReceiverCredential, должно быть ссылкой на объект, полученной с помощью командлета <strong>Get-Credential</strong>. Например, следующий код возвращает объект учетных данных для пользователя litwareinc\pilar и сохраняет этот объект в переменной с именем $y:</p>
<p>$y = Get-Credential &quot;litwareinc\pilar&quot;</p>
<p>При запуске этой команды необходимо указать пароль пользователя.</p>
<p>Учетные данные получателя не требуются, если тест выполняется с параметрами конфигурации наблюдения за работоспособностью пула.</p></td>
</tr>
<tr class="even">
<td><p><em>SenderCredential</em></p></td>
<td><p>Обязательный</p></td>
<td><p>PSCredential</p></td>
<td><p>Объект учетных данных пользователя для второго из двух учетных записей пользователей, которые должны тестироваться. Значение, переданное в SenderCredential, должно быть ссылкой на объект, полученной с помощью командлета <strong>Get-Credential</strong>. Например, следующий код возвращает объект учетных данных для пользователя litwareinc\kenmyer и сохраняет этот объект в переменной с именем $x:</p>
<p>$x = Get-Credential &quot;litwareinc\kenmyer&quot;</p>
<p>При запуске этой команды необходимо указать пароль пользователя.</p>
<p>Учетные данные отправителя не требуются, если тест выполняется с параметрами конфигурации наблюдения за работоспособностью для пула.</p></td>
</tr>
<tr class="odd">
<td><p><em>TargetFqdn</em></p></td>
<td><p>Обязательный</p></td>
<td><p>String</p></td>
<td><p>Полное доменное имя пула, который должен тестироваться.</p></td>
</tr>
<tr class="even">
<td><p><em>Authentication</em></p></td>
<td><p>Необязательный</p></td>
<td><p>SipSyntheticTransaction AuthenticationMechanism</p></td>
<td><p>Тип проверки подлинности, используемой в тесте. Разрешенные значения:</p>
<p>* TrustedServer</p>
<p>* Negotiate</p>
<p>* ClientCertificate</p>
<p>* LiveID</p></td>
</tr>
<tr class="odd">
<td><p><em>Force</em></p></td>
<td><p>Необязательный</p></td>
<td><p>SwitchParameter</p></td>
<td><p>Подавляет отображение любых сообщений о некритических ошибках, которые могут возникать при выполнении этой команды.</p></td>
</tr>
<tr class="even">
<td><p><em>OutLoggerVariable</em></p></td>
<td><p>Необязательный</p></td>
<td><p>String</p></td>
<td><p>Если этот параметр используется, подробные результаты выполнения командлета будут сохранены в указанной переменной. Эта переменная включает в себя пару методов, ToHTML и ToXML, которые затем могут использоваться для сохранения этих результатов в HTML-файле или в XML-файле.</p>
<p>Для сохранения выходных результатов в переменной средства ведения журнала с именем $TestOutput используется следующий синтаксис:</p>
<p>-OutLoggerVariable TestOutput</p>
<p>Примечание. При указании имени переменной не следует добавлять в начало символ $. Чтобы сохранить информацию, содержащуюся в переменной средства ведения журнала, в HTML-файле, используйте команду, аналогичную следующей:</p>
<p>$TestOutput.ToHTML() &gt; C:\Logs\TestOutput.html</p>
<p>Чтобы сохранить информацию, содержащуюся в переменной средства ведения журнала, в XML-файле, используйте команду, аналогичную следующей:</p>
<p></p>
<p>$TestOutput.ToXML() &gt; C:\Logs\TestOutput.xml</p></td>
</tr>
<tr class="odd">
<td><p><em>OutVerboseVariable</em></p></td>
<td><p>Необязательный</p></td>
<td><p>String</p></td>
<td><p>При указании этого параметра подробные результаты выполнения командлета будут сохранены в указанной переменной. Например, чтобы сохранить результаты в переменную $TestOutput, используйте следующий синтаксис:</p>
<p>-OutVerboseVariable TestOutput</p>
<p>При указании имени переменной не следует добавлять в его начало символ $.</p></td>
</tr>
<tr class="even">
<td><p><em>ReceiverSipAddress</em></p></td>
<td><p>Необязательный</p></td>
<td><p>String</p></td>
<td><p>SIP-адрес для первой из двух учетных записей пользователей, которые должны тестироваться. Например: -ReceiverSipAddress &quot;sip:pilar@litwareinc.com&quot;. Параметр ReceiverSipAddress должен ссылаться на ту же учетную запись пользователя, что и параметр ReceiverCredential.</p>
<p>SIP-адрес не требуется, если тест выполняется с параметрами конфигурации наблюдения за работоспособностью для пула.</p></td>
</tr>
<tr class="odd">
<td><p><em>RegistrarPort</em></p></td>
<td><p>Необязательный</p></td>
<td><p>Int32</p></td>
<td><p>Порт SIP, используемый службой регистратора. Этот параметр не обязателен, если регистратор использует порт по умолчанию, 5061.</p></td>
</tr>
<tr class="even">
<td><p><em>SenderSipAddress</em></p></td>
<td><p>Необязательный</p></td>
<td><p>String</p></td>
<td><p>SIP-адрес для второй из двух учетных записей пользователей, которые должны тестироваться. Например: -SenderSipAddress &quot;sip:kenmyer@litwareinc.com&quot;. Параметр SenderSipAddress должен ссылаться на ту же учетную запись пользователя, что и параметр SenderCredential.</p>
<p>SIP-адрес не требуется, если тест выполняется с параметрами конфигурации наблюдения за работоспособностью для пула.</p></td>
</tr>
<tr class="odd">
<td><p><em>TestJoinLauncher</em></p></td>
<td><p>Необязательный</p></td>
<td><p>SwitchParameter</p></td>
<td><p>Если этот параметр используется, проверяется возможность участия в аудио- или видеоконференции компонента обеспечения процесса присоединения. Компонент обеспечения процесса присоединения помогает пользователям мобильных устройств (и, соответственно, пользователям службы Mobility Service) принимать участие в конференциях.</p></td>
</tr>
</tbody>
</table>


## Типы входных данных

Нет.

## Типы возвращаемых данных

Командлет **Test-CsAVConference** возвращает экземпляр объекта Microsoft.Rtc.SyntheticTransactions.TaskOutput.

## См. также

#### Другие ресурсы

[Get-CsAVEdgeConfiguration](get-csavedgeconfiguration.md)  
[Test-CsDialInConferencing](test-csdialinconferencing.md)

