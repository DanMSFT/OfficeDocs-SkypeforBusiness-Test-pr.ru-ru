---
title: New-CsImFilterConfiguration
TOCTitle: New-CsImFilterConfiguration
ms:assetid: 1964cbf9-d7f1-4b4e-99d1-951ac42d82fe
ms:mtpsurl: https://technet.microsoft.com/ru-ru/library/Gg398244(v=OCS.15)
ms:contentKeyID: 49309087
ms.date: 05/19/2016
mtps_version: v=OCS.15
ms.translationtype: HT
---

# New-CsImFilterConfiguration

 

_**Дата изменения раздела:** 2015-03-09_

Создает конфигурацию фильтра обмена мгновенными сообщениями (IM). IM-фильтры используются, чтобы не позволять пользователям отправлять мгновенные сообщения с активными гиперссылками. Данный командлет впервые появился в Lync Server 2010.

## Синтаксис

    New-CsImFilterConfiguration -Identity <XdsIdentity> [-Action <Allow | Block | Warn>] [-AllowMessage <String>] [-BlockFileExtension <$true | $false>] [-Confirm [<SwitchParameter>]] [-Enabled <$true | $false>] [-Force <SwitchParameter>] [-IgnoreLocal <$true | $false>] [-InMemory <SwitchParameter>] [-Prefixes <PSListModifier>] [-WarnMessage <String>] [-WhatIf [<SwitchParameter>]]

## Примеры

## ПРИМЕР 1

В примере 1 командлет **New-CsImFilterConfiguration** используется для создания новой конфигурации IM-фильтра с удостоверением site:Redmond. (Так как дополнительные параметры не указаны, конфигурация создается со значениями по умолчанию.)

    New-CsImFilterConfiguration -Identity site:Redmond

## ПРИМЕР 2

В этой команде командлет **New-CsImFilterConfiguration** используется для создания конфигурации IM-фильтра с удостоверением site:Redmond. Так как указан параметр Prefixes, новая конфигурация будет содержать все значения по умолчанию, в том числе префиксы фильтра по умолчанию, а также два дополнительных префикса URI: rtsp: и urn:. Эти префиксы добавляются в список по умолчанию с помощью модификатора списка add.

    New-CsImFilterConfiguration -Identity site:Redmond -Prefixes @{add="rtsp:","urn:"}

## ПРИМЕР 3

В этой команде командлет **New-CsFileTransferFilterConfiguration** используется для создания конфигурации IM-фильтра с удостоверением site:Redmond. Этот пример аналогичен примеру 2, но модификатор списка replace используется вместо модификатора add. Это означает, что все префиксы URI по умолчанию будут заменены на эти два префикса (rtsp: и urn:). Поэтому только URI-адреса с префиксами rtsp: и urn: будут фильтроваться в мгновенных сообщениях для сайта Redmond.

    New-CsImFilterConfiguration -Identity site:Redmond -Prefixes @{replace="rtsp:","urn:"}

## Подробное описание

При отправке мгновенных сообщений пользователи могут внедрить в текст сообщения URI-ссылку для того, чтобы предоставить другим участникам беседы ссылку на определенный веб-сайт или общий ресурс. Lync Server можно настроить на блокировку гиперссылок с определенными префиксами. В таком случае участники беседы не смогут просто нажать на ссылку, им придется вручную скопировать и вставить ссылку в браузер.

Командлет **New-CsImFilterConfiguration** позволяет определить список префиксов URI, которые будут фильтроваться, помимо включения и отключения фильтрации на определенном сайте. При вызове командлет **New-CsImFilterConfiguration** только с указанным удостоверением будет создана конфигурация с этим удостоверением, а список префиксов для этого сайта будет заполнен префиксами по умолчанию, которые будут фильтроваться.

По умолчанию запускать командлет **New-CsImFilterConfiguration** локально могут участники группы RTCUniversalServerAdmins. Чтобы получить список всех ролей управления доступом на основе ролей (RBAC), которые были назначены для этого командлета (включая все созданные вами роли RBAC), запустите следующую команду из командной строки Windows PowerShell:

Get-CsAdminRole | Where-Object {$\_.Cmdlets –match "New-CsImFilterConfiguration"}

## Параметры


<table>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="header">
<th>Параметр</th>
<th>Обязательный?</th>
<th>Тип</th>
<th>Описание</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p><em>Identity</em></p></td>
<td><p>Обязательный</p></td>
<td><p>XdsIdentity</p></td>
<td><p>Уникальный идентификатор, указывающий область действия конфигурации IM-фильтра. Глобальные параметры существуют по умолчанию и их нельзя воссоздать с помощью командлета <strong>New-CsImFilterConfiguration</strong>, но вы можете создать параметры на уровне сайта, указав удостоверение сайта:&lt;имя_сайта&gt;, где &lt;имя_сайта&gt; — это имя сайта, к которым применяются параметры (например, site:Redmond).</p>
<p>Полный тип данных: Microsoft.Rtc.Management.Xds.XdsIdentity</p></td>
</tr>
<tr class="even">
<td><p><em>Action</em></p></td>
<td><p>Необязательный</p></td>
<td><p>UrlFilterAction</p></td>
<td><p>Значение этого параметра определяет действие, которое будет выполнено при включении гиперссылки в мгновенное сообщение:</p>
<p>Allow — в гиперссылки добавляется префикс в виде подчеркивания, чтобы ссылки перестали быть активными. Если в свойстве AllowMessage указано сообщение, оно будет вставлено в начале каждого мгновенного сообщения с гиперссылками.</p>
<p>Block — сообщения с активными гиперссылками блокируются, а Lync Server отправляет сообщение об ошибке отправителю.</p>
<p>Warn — сообщения с активными гиперссылками доставляются получателям вместе с предупреждением, вставленным в начале этих сообщений. Предупреждение можно указать с помощью свойства WarnMessage. Если задан параметр Warn, но не указано значение WarnMessage, фильтрация мгновенных сообщения отключена, хотя свойство BlockFileExtension все равно учитывается.</p>
<p>По умолчанию: разрешить, если сообщение не содержит больше 1000 URL-адресов, иначе по умолчанию используется значение Block.</p>
<p>Полный тип данных: Microsoft.Rtc.Management.WritableConfig.Settings.ImFilter.UrlFilterAction</p></td>
</tr>
<tr class="odd">
<td><p><em>AllowMessage</em></p></td>
<td><p>Необязательный</p></td>
<td><p>Строка</p></td>
<td><p>Если для этого параметра задано значение, эта строка вставляется в начале каждого сообщения с гиперссылками, если значение свойства Action равно Allow. Вы можете использовать это сообщение для уведомления пользователей, например, о потенциальной опасности перехода по неизвестным ссылкам или о политиках и требованиях вашей организации.</p></td>
</tr>
<tr class="even">
<td><p><em>BlockFileExtension</em></p></td>
<td><p>Необязательный</p></td>
<td><p>Логическое</p></td>
<td><p>Если задано значение True, гиперссылка, содержащая путь к файлу с расширением, заданным в свойстве Extensions, которое определено в конфигурации фильтра передачи файлов (ее можно получить с помощью командлета <strong>Get-CsFileTransferFilterConfiguration</strong>), блокируется, а отправителю возвращается сообщение об ошибке. Если задано значение False, расширения файлов не проверяются.</p>
<p>По умолчанию: True</p></td>
</tr>
<tr class="odd">
<td><p><em>Confirm</em></p></td>
<td><p>Необязательный</p></td>
<td><p>SwitchParameter</p></td>
<td><p>Запрашивает подтверждение перед выполнением команды.</p></td>
</tr>
<tr class="even">
<td><p><em>Enabled</em></p></td>
<td><p>Необязательный</p></td>
<td><p>Логическое</p></td>
<td><p>Включает или отключает эту функцию. Если задано значение True, мгновенные сообщения проверяются на наличие гиперссылок и применяются правила этой конфигурации. Если задано значение False, сообщения не проверяются на наличие гиперссылок.</p>
<p>По умолчанию: True</p></td>
</tr>
<tr class="odd">
<td><p><em>Force</em></p></td>
<td><p>Необязательный</p></td>
<td><p>SwitchParameter</p></td>
<td><p>Отменяет вывод каких-либо запросов на подтверждение, которые в противном случае отображались бы перед внесением изменений.</p></td>
</tr>
<tr class="even">
<td><p><em>IgnoreLocal</em></p></td>
<td><p>Необязательный</p></td>
<td><p>Логическое</p></td>
<td><p>Значение этого параметра управляет тем, выполняется ли фильтрация для URI-адресов локальной интрасети, переданных в мгновенных сообщениях. Если задано значение True, любой URI-адрес, определенный в зоне интрасети локального компьютера, игнорируется. (Локальный компьютер — переднего плана с приложением IM-фильтра.) Если задано значение False, указанная фильтрация применяется ко всем гиперссылкам.</p>
<p>По умолчанию: True</p></td>
</tr>
<tr class="odd">
<td><p><em>InMemory</em></p></td>
<td><p>Необязательный</p></td>
<td><p>SwitchParameter</p></td>
<td><p>Создает ссылку на объект без фиксации объекта в качестве постоянного изменения. Если выходные данные этого командлета, вызванного с помощью указанного параметра, назначаются переменной, можно внести изменения в свойства ссылки на объект и затем зафиксировать эти изменения, вызвав соответствующий командлет Set-.</p></td>
</tr>
<tr class="even">
<td><p><em>Prefixes</em></p></td>
<td><p>Необязательный</p></td>
<td><p>PSListModifier</p></td>
<td><p>Список префиксов URI, которые будут фильтроваться. Любая гиперссылка в мгновенном сообщении с префиксом, соответствующим одному из префиксов в этом списке, будет фильтроваться в соответствии с заданными параметрами.</p>
<p>Значение по умолчанию: callto:, file:, ftp., ftp:, gopher:, href, http:, https:, ldap:, mailto:, news:, nntp:, sip:, sips:, tel:, telnet:, www*.</p></td>
</tr>
<tr class="odd">
<td><p><em>WarnMessage</em></p></td>
<td><p>Необязательный</p></td>
<td><p>Строка</p></td>
<td><p>Этот параметр содержит предупреждение, которое вставляется в начале каждого мгновенного сообщения с гиперссылками, если значение свойства Action равно Warn. Обычно это сообщение используется для уведомления пользователей о потенциальной опасности перехода по неизвестным ссылкам или о политиках и требованиях вашей организации.</p></td>
</tr>
<tr class="even">
<td><p><em>WhatIf</em></p></td>
<td><p>Необязательный</p></td>
<td><p>SwitchParameter</p></td>
<td><p>Описывает, что произойдет при выполнении команды без реального выполнения команды.</p></td>
</tr>
</tbody>
</table>


## Типы входных данных

Нет.

## Типы возвращаемых данных

Создает объект типа Microsoft.Rtc.Management.WritableConfig.Settings.ImFilter.ImFilterConfiguration.

## См. также

#### Другие ресурсы

[Remove-CsImFilterConfiguration](remove-csimfilterconfiguration.md)  
[Set-CsImFilterConfiguration](set-csimfilterconfiguration.md)  
[Get-CsImFilterConfiguration](get-csimfilterconfiguration.md)

