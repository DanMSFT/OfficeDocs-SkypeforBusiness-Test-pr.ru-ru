---
title: Test-CsGroupIM
TOCTitle: Test-CsGroupIM
ms:assetid: 1e73fd7a-5727-4688-8d4c-a3107c3985e9
ms:mtpsurl: https://technet.microsoft.com/ru-ru/library/Gg398273(v=OCS.15)
ms:contentKeyID: 49309139
ms.date: 05/19/2016
mtps_version: v=OCS.15
ms.translationtype: HT
---

# Test-CsGroupIM

 

_**Дата изменения раздела:** 2015-03-09_

Проверяет возможность двух пользователей проводить конференцию обмена мгновенными сообщениями. Командлет **Test-CsGroupIM** — это "искусственная транзакция", симуляция распространенных действий Lync Server, используемых для мониторинга работоспособности и производительности. Данный командлет впервые появился в Lync Server 2010.

## Синтаксис

    Test-CsGroupIM -ReceiverCredential <PSCredential> -ReceiverSipAddress <String> -SenderCredential <PSCredential> -SenderSipAddress <String> [-Authentication <TrustedServer | Negotiate | ClientCertificate | LiveID>] [-RegistrarPort <Int32>] [-TargetFqdn <String>] <COMMON PARAMETERS>

    Test-CsGroupIM -TargetFqdn <String> [-Authentication <TrustedServer | Negotiate | ClientCertificate | LiveID>] [-ReceiverSipAddress <String>] [-RegistrarPort <Int32>] [-SenderSipAddress <String>] <COMMON PARAMETERS>

    Test-CsGroupIM [-Authentication <TrustedServer | Negotiate | ClientCertificate | LiveID>] <COMMON PARAMETERS>

    COMMON PARAMETERS: [-Force <SwitchParameter>] [-OutLoggerVariable <String>] [-OutVerboseVariable <String>] [-TestJoinLauncher <SwitchParameter>]

## Примеры

## ПРИМЕР 1

В примере 1 выполняется проверка того, могут ли два заранее настроенных тестовых пользователя войти в пул atl-cs-001.litwareinc.com и участвовать в конференции обмена мгновенными сообщениями. Эта команда будет работать, только если тестовые пользователи определены для пула atl-cs-001.litwareinc.com. Если это так, команда определит, могут ли два пользователя войти в систему, а затем проверить, могут ли они участвовать в конференции обмена мгновенными сообщениями.

Если тестовые пользователи не были определены, команда завершится с ошибкой, так как она не будет знать, каких пользователей применять в тесте. Если вы не определили тестовых пользователей для пула, укажите параметры SenderSipAddress и ReceiverSipAddress, а также соответствующие учетные данные для пользователей, участвующих в сеансе обмена мгновенными сообщениями. Затем командлет **Test-CsGroupIM** выполнит проверки с применением указанных пользователей.

    Test-CsGroupIm -TargetFqdn atl-cs-001.litwareinc.com

## ПРИМЕР 2

Команды, показанные в примере 2, проверяют возможность двух пользователей (litwareinc\\pilar и litwareinc\\kenmyer) входить в Lync Server и участвовать в конференции обмена мгновенными сообщениями. Для этого первая команда в примере использует командлет **Get-Credential** для создания объекта учетных данных Windows PowerShell, содержащего имя и пароль пользователя Пилар Аккерман (Pilar Ackerman). (Так как имя пользователя litwareinc\\pilar указано как параметр, в диалоговом окне запроса учетных данных Windows PowerShell требуется ввести только пароль для учетной записи пользователя Пилар Аккерман.) Полученный объект учетных данных затем сохраняется в переменной $cred1. Вторая команда делает то же самое, но на этот раз возвращает объект учетных данных для пользователя Кен Майер (Ken Myer).

После получения двух объектов учетных данных третья команда в примере определяет, могут ли два пользователя войти в Lync Server и участвовать в конференции обмена мгновенными сообщениями. Для выполнения этой задачи вызывается метод **Test-CsGroupIM** со следующими параметрами: TargetFqdn (полное доменное имя пула службы Registrar); SenderSipAddress (SIP-адрес первого пользователя); SenderCredential (учетные данные первого пользователя); ReceiverSipAddress (SIP-адрес второго пользователя); ReceiverCredential (учетные данные второго пользователя).

    $cred1 = Get-Credential "litwareinc\pilar"
    $cred2 = Get-Credential "litwareinc\kenmyer"
    
    Test-CsGroupIm -TargetFqdn atl-cs-001.litwareinc.com -SenderSipAddress "sip:pilar@litwareinc.com" -SenderCredential $cred1 -ReceiverSipAddress "sip:kenmyer@litwareinc.com" -ReceiverCredential $cred2

## Подробное описание

Командлет **Test-CsGroupIM** является примером искусственной транзакции Lync Server. Искусственные транзакции используются в Lync Server для проверки возможности успешного выполнения пользователями таких действий, как выполнение входа, отправка мгновенных сообщений, выполнение звонков на номер стандартной телефонной сети (PSTN). Подобные тесты могут быть выполнены администратором вручную или автоматически с помощью приложения, такого как Microsoft System Center Operations Manager (ранее Microsoft Operations Manager).

Обычно искусственные транзакции выполняются двумя разными способами. Многие администраторы применяют командлеты **CsHealthMonitoringConfiguration**, чтобы задать тестовых пользователей для каждого из своих пулов Registrar. Тестовые пользователи представляют собой пару пользователей, предварительно настроенных для применения с искусственными транзакциями. (Обычно это тестовые учетные записи, не принадлежащие реальным пользователям.) С помощью настроенных для пула тестовых пользователей администраторы могут легко запускать искусственную транзакцию в рамках пула без необходимости указывать идентификаторы (и предоставлять учетные данные) для применяемых в тесте пользовательских учетных записей.

Или же администраторы могут выполнить искусственную транзакцию с помощью фактических учетных записей пользователей. Например, если два пользователя не могут обмениваться мгновенными сообщениями, администратор может выполнить искусственную транзакцию с применением двух существующих учетных записей (вместо пары тестовых учетных записей), а затем попытается диагностировать и устранить проблему. Если вы решили выполнить искусственную транзакцию с фактическими учетными записями, потребуется указать учетные данные каждого пользователя.

Командлет **Test-CsGroupIM** позволяет проверить, могут ли пользователи организации проводить конференции. **Test-CsGroupIM** требуется две учетной записи пользователя для выполнения тестов. Если вы настроили тестовых пользователей для пула, в котором будет проводиться тест, вам не нужно указывать эти учетные записи. Вместо этого **Test-CsGroupIM** автоматически использует тестовые учетные записи, назначенные пулу. (Дополнительные сведения см. в разделе справки [New-CsHealthMonitoringConfiguration](new-cshealthmonitoringconfiguration.md).) Или же вы можете выполнить тест с использованием учетных записей, отличных от тех, что назначены службе Registrar. Это позволяет проводить тесты, даже если вы не настроили тестовых пользователей для пула. Это также позволяет проверять возможность двух определенных пользователей проводить конференцию. Если вы выбрали этот подход, вам понадобится указать имя пользователя и пароль для обоих пользователей.

После запуска **Test-CsGroupIM** командлет пытается выполнить вход в Lync Server для обоих пользователей. При успешном входе командлет **Test-CsGroupIM** создает конференцию с помощью первого тестового пользователя, а затем приглашает второго пользователя присоединиться к конференции. После обмена сообщениями оба пользователя отключаются от системы. Все это происходит без вмешательства пользователя и без влияния на фактических пользователей. Например, предположим, что тестовая учетная запись sip:kenmyer@litwareinc.com соответствует реальному пользователю с существующей учетной записью Lync Server. В этом случае тест будет проведен без прерывания работы пользователя Кен Майер (Ken Myer). Например, даже если тестовая учетная запись Кена Майера выходит из системы, сам Кен Майер останется в системе. Аналогичным образом, реальный Кен Майер не получит приглашение на присоединение к конференции. Оно будет отправлено и принято тестовой учетной записью.

Добавление параметра Verbose позволяет получить подробный отчет о всех действиях, выполненных командлетом **Test-CsGroupIM** для выполнения теста.

Кто может запускать данный командлет: чтобы получить список всех ролей управления доступом на основе ролей (RBAC), которые были назначены для этого командлета (включая все созданные вами роли RBAC), запустите следующую команду из командной строки Windows PowerShell:

Get-CsAdminRole | Where-Object {$\_.Cmdlets –match "Test-CsGroupIM"}

## Параметры


<table>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="header">
<th>Параметр</th>
<th>Обязательный?</th>
<th>Тип</th>
<th>Описание</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p><em>ReceiverCredential</em></p></td>
<td><p>Обязательный</p></td>
<td><p>PSCredential</p></td>
<td><p>Объект учетных данных пользователя для первой из двух учетных записей подлежит тестированию. Значение, передаваемое для ReceiverCredential, должно быть ссылкой на объект, получаемой через применение командлета <strong>Get-Credential</strong>. Например, этот код возвращает объект учетных данных для пользователя litwareinc\pilar и сохраняет этот объект в переменной под названием $y:</p>
<p>$y = Get-Credential &quot;litwareinc\pilar&quot;</p>
<p>При выполнении данной команды требуется указать пароль пользователя.</p>
<p>Учетные данные получателя не требуются, если тест запускается с настройками конфигурации мониторинга исправности пула.</p></td>
</tr>
<tr class="even">
<td><p><em>SenderCredential</em></p></td>
<td><p>Обязательный</p></td>
<td><p>PSCredential</p></td>
<td><p>Объект учетных данных пользователя для второй тестируемой учетной записи. Значение, передаваемое для SenderCredential, должно быть ссылкой на объект, получаемой через применение командлета <strong>Get-Credential</strong>. Например, этот код возвращает объект учетных данных для пользователя litwareinc\kenmyer и сохраняет этот объект в переменной под названием $x:</p>
<p>$x = Get-Credential &quot;litwareinc\kenmyer&quot;</p>
<p>При выполнении данной команды требуется указать пароль пользователя.</p>
<p>Учетные данные отправителя не требуются, если тест запускается с настройками конфигурации мониторинга исправности пула.</p></td>
</tr>
<tr class="odd">
<td><p><em>TargetFqdn</em></p></td>
<td><p>Обязательный</p></td>
<td><p>Строка</p></td>
<td><p>Полное доменное имя (FQDN) тестируемого пула.</p></td>
</tr>
<tr class="even">
<td><p><em>Authentication</em></p></td>
<td><p>Необязательный</p></td>
<td><p>SipSyntheticTransaction + AuthenticationMechanism</p></td>
<td><p>Тип проверки подлинности, используемой в тесте. Допустимые значения:</p>
<p>* TrustedServer</p>
<p>* Negotiate</p>
<p>* ClientCertificate</p>
<p>* LiveID</p></td>
</tr>
<tr class="odd">
<td><p><em>Force</em></p></td>
<td><p>Необязательный</p></td>
<td><p>SwitchParameter</p></td>
<td><p>Запрещает на время выполнения команды отображение каких-либо сообщений о некритических ошибках.</p></td>
</tr>
<tr class="even">
<td><p><em>OutLoggerVariable</em></p></td>
<td><p>Необязательный</p></td>
<td><p>Строка</p></td>
<td><p>При указании переменной подробный отчет о выполнении командлета будет записан в эту переменную. Данная переменная содержит пару методов, ToHTML и ToXML, с помощью которых отчет может быть сохранен в HTML- или XML-файл.</p>
<p>Чтобы сохранить результаты в переменную средства ведения журнала с именем $TestOutput, используется следующий синтаксис:</p>
<p>-OutLoggerVariable TestOutput</p>
<p>Примечание. Не добавляйте символ $ к указываемому имени переменной. Для записи данных, хранимых в переменной средства ведения журнала, в HTML-файл используйте следующую команду:</p>
<p>$TestOutput.ToHTML() &gt; C:\Logs\TestOutput.html</p>
<p>Чтобы записать в XML-файл данные, хранящиеся в переменной средства ведения журнала, используйте следующую команду:</p>
<p></p>
<p>$TestOutput.ToXML() &gt; C:\Logs\TestOutput.xml</p></td>
</tr>
<tr class="odd">
<td><p><em>OutVerboseVariable</em></p></td>
<td><p>Необязательный</p></td>
<td><p>Строка</p></td>
<td><p>При указании переменной подробный отчет о выполнении командлета будет записан в эту переменную. Например, чтобы сохранить выходные данные в переменную под названием $TestOutput, используйте следующий синтаксис:</p>
<p>-OutVerboseVariable TestOutput</p>
<p>При указании имени переменной не добавляйте к его началу символ $.</p></td>
</tr>
<tr class="even">
<td><p><em>ReceiverSipAddress</em></p></td>
<td><p>Необязательный</p></td>
<td><p>Строка</p></td>
<td><p>SIP-адрес для первой из двух тестируемых учетных записей пользователя. Например: -ReceiverSipAddress &quot;sip:pilar@litwareinc.com&quot;. Параметр ReceiverSipAddress должен ссылаться на ту же учетную запись, что и ReceiverCredential.</p>
<p>SIP-адрес не требуется, если тест запускается с настройками конфигурации мониторинга исправности пула.</p></td>
</tr>
<tr class="odd">
<td><p><em>RegistrarPort</em></p></td>
<td><p>Необязательный</p></td>
<td><p>Int32</p></td>
<td><p>SIP-порт, используемый службой Registrar. Указание данного параметра не требуется, если служба регистратора использует стандартный порт 5061.</p></td>
</tr>
<tr class="even">
<td><p><em>SenderSipAddress</em></p></td>
<td><p>Необязательный</p></td>
<td><p>Строка</p></td>
<td><p>SIP-адрес для второй тестируемой учетной записи пользователя. Например: -SenderSipAddres &quot;sip:kenmyer@litwareinc.com&quot;. Параметр SenderSipAddress должен ссылаться на ту же учетную запись, что и SenderCredential.</p>
<p>SIP-адрес не требуется, если тест запускается с настройками конфигурации мониторинга исправности пула.</p></td>
</tr>
<tr class="odd">
<td><p><em>TestJoinLauncher</em></p></td>
<td><p>Необязательный</p></td>
<td><p>SwitchParameter</p></td>
<td><p>Если этот параметр указан, проверяет возможность средства запуска присоединения участвовать в аудио-видео конференции. Средство запуска присоединения применяется, чтобы помочь пользователям мобильных устройств (и, соответственно, пользователям службы Mobility Service) присоединяться к конференциям.</p></td>
</tr>
</tbody>
</table>


## Типы входных данных

Нет. Командлет **Test-CsGroupIM** не принимает конвейерные входные данные.

## Типы возвращаемых данных

Командлет **Test-CsGroupIM** возвращает экземпляр объекта Microsoft.Rtc.SyntheticTransactions.TaskOutput.

## См. также

#### Другие ресурсы

[Test-CsIM](test-csim.md)

