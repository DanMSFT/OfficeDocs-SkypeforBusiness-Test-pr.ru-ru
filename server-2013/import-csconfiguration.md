---
title: Import-CsConfiguration
TOCTitle: Import-CsConfiguration
ms:assetid: 9a9c27f2-313c-4327-aeed-c47852a831ec
ms:mtpsurl: https://technet.microsoft.com/ru-ru/library/Gg398800(v=OCS.15)
ms:contentKeyID: 49310633
ms.date: 05/19/2016
mtps_version: v=OCS.15
ms.translationtype: HT
---

# Import-CsConfiguration

 

_**Дата изменения раздела:** 2015-03-09_

Импортирует топологию, политики и параметры конфигурации Lync Server в центральное хранилище управления или на локальный компьютер.Данный командлет впервые появился в Lync Server 2010.

## Синтаксис

    Import-CsConfiguration -ByteInput <Byte[]> <COMMON PARAMETERS>

    Import-CsConfiguration -FileName <String> <COMMON PARAMETERS>

    COMMON PARAMETERS: [-Force <SwitchParameter>] [-LocalStore <SwitchParameter>]

## Примеры

## ПРИМЕР 1

Команда, показанная в примере 1, импортирует текущую топологию, параметры конфигурации и политики из файла с именем C:\\Config.zip в центральном хранилище управления.

    Import-CsConfiguration -FileName "C:\Config.zip"

## ПРИМЕР 2

В примере 2 показан способ первоначальной репликации данных на компьютер, находящийся в сети периметра. В этом примере данные конфигурации экспортируются в файл с именем Config.zip, который затем копируется в папку C:\\ на компьютере, находящемся в сети периметра. После этого для импорта данных выполняется командлет Import-CsConfiguration с параметром LocalStore, благодаря которому данные импортируются на локальный компьютер, а не в центральном хранилище управления.

    Import-CsConfiguration -FileName "C:\Config.zip" -LocalStore

## ПРИМЕР 3

Две команды, показанные в примере 3, служат для экспорта текущей топологии, параметров конфигурации и политик и последующего импорта этих данных на локальный компьютер без использования ZIP-файла. Для этого в первой команде используется командлет **Export-CsConfiguration** с параметром AsBytes, который экспортирует текущую топологию, параметры конфигурации и политики в виде массива байтов. Этот массив байтов хранится в переменной с именем $x. Во второй команде используется командлет **Import-CsConfiguration** с параметром ByteInput, который импортирует данные, хранящиеся в переменной $x. Благодаря параметру LocalStore данные импортируются на локальный компьютер, а не в центральное хранилище управления. Конечный результат заключается в копировании данных из центрального хранилища управления на локальный компьютер.

    $x = Export-CsConfiguration -AsBytes
    Import-CsConfiguration -ByteInput $x -LocalStore

## Подробное описание

Чтобы компьютеры, на которых выполняются службы Lync Server или роли сервера, могли выполнять свою функцию, на них должна иметься копия текущей топологии, текущих параметров конфигурации и текущих политик. Командлет Lync Server служит для передачи этих сведений на каждый соответствующий компьютер.

Командлеты Import-CsConfiguration и Export-CsConfiguration используются для резервного копирования и восстановления топологии, параметров конфигурации и политик Lync Server в процессе обновления центрального хранилища управления. Командлет **Export-CsConfiguration** позволяет экспортировать данные в ZIP-файл. После этого можно воспользоваться командлетом **Import-CsConfiguration** для чтения ZIP-файла и восстановления топологии, параметров и политик в центральном хранилище управления. Затем службы репликации Lync Server реплицируют восстановленные сведения на компьютеры, на которых выполняются службы.

Экспорт и импорт данных конфигурации также используется при первоначальной настройке компьютеров, находящихся в сети периметра (например, сервер). При настройке компьютера в сети периметра сначала необходимо выполнить репликацию вручную с помощью командлетов CsConfiguration: экспортируйте данные конфигурации с помощью командлета **Export-CsConfiguration**, а затем скопируйте ZIP-файл на компьютер в сети периметра. После этого можно импортировать данные с помощью командлета **Import-CsConfiguration** с параметром LocalStore. Это нужно сделать только один раз, после чего репликация будет выполняться автоматически.

Пользователи, которые могут выполнять командлет. По умолчанию право на локальное выполнение командлета **Import-CsConfiguration** имеют члены следующих групп: RTCUniversalServerAdmins. Кроме членства в группе RTCUniversalServerAdmins, для выполнения этого командлета вы также должны являться локальным администратором или иметь разрешения на локальную репликацию конфигурации. Чтобы получить список всех ролей управления доступом на основе ролей (RBAC), которым назначен этот командлет (включая настраиваемые роли RBAC, созданные самостоятельно), выполните в командной строке Windows PowerShell следующую команду.

Get-CsAdminRole | Where-Object {$\_.Cmdlets –match "Import-CsConfiguration"}

## Параметры


<table>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="header">
<th>Параметр</th>
<th>Обязательный?</th>
<th>Тип</th>
<th>Описание</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p><em>ByteInput</em></p></td>
<td><p>Обязательный</p></td>
<td><p>System.Byte[]</p></td>
<td><p>Считывает сведения о топологии из массива байтов, хранящегося в переменной. Этот массив байтов создается с помощью параметра ByteInput при вызове командлета <strong>Export-CsConfiguration</strong>.</p>
<p>Использовать параметры ByteInput и FileName в одной команде нельзя.</p></td>
</tr>
<tr class="even">
<td><p><em>FileName</em></p></td>
<td><p>Обязательный</p></td>
<td><p>System.String</p></td>
<td><p>Путь к ZIP-файлу, созданному с помощью командлета Export-CsConfiguration. Пример: -FileName &quot;C:\Config.zip&quot;. Обратите внимание на то, что при вызове командлета <strong>Import-CsConfiguration</strong> можно использовать только один из параметров FileName или ByteInput, но не оба одновременно.</p></td>
</tr>
<tr class="odd">
<td><p><em>Force</em></p></td>
<td><p>Необязательный</p></td>
<td><p>System.Management.Automation.SwitchParameter</p></td>
<td><p>Подавляет вывод запросов в случае некритических ошибок при выполнении команды. Чтобы задать для параметра Force значение True, используйте следующий синтаксис.</p>
<p>-Force:$True</p></td>
</tr>
<tr class="even">
<td><p><em>LocalStore</em></p></td>
<td><p>Необязательный</p></td>
<td><p>System.Management.Automation.SwitchParameter</p></td>
<td><p>Копирует данные конфигурации на локальный компьютер, а не в центральное хранилище управления.</p></td>
</tr>
</tbody>
</table>


## Типы входных данных

Нет. Командлет **Import-CsConfiguration** не принимает входные данные из конвейера.

## Типы возвращаемых данных

Командлет **Import-CsConfiguration** не возвращает значения или объекты.

## См. также

#### Другие ресурсы

[Export-CsConfiguration](export-csconfiguration.md)

